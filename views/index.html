<!doctype html>
<html lang="{{T("html_lang")}}">

<head>
    {{if .SentryDSN != ""}}
        <!-- NOTE: this will not be blocked by ad blockers -->
        <!-- if we do our own analytics it may not be blocked at all bleh -->
        <!-- TODO: make this friendly to ad blockers -->
        <script src="/{{asset("assets/vendor-js/sentry-7.60.0-bundle.min.js")}}"></script>
        <script>
        Sentry.init({
            dsn: "{{.SentryDSN}}",
            tracesSampleRate: 0.01,
        });
        </script>
    {{end}}
    {{if .GTMContainerID != ""}}
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','{{.GTMContainerID}}');</script>
        <!-- End Google Tag Manager -->
    {{end}}
    {{if .CloudflareAnalyticsToken != ""}}
        <!-- Cloudflare Web Analytics -->
            <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "{{.CloudflareAnalyticsToken}}"}'></script>
        <!-- End Cloudflare Web Analytics -->
    {{end}}

    <!-- NOTE: both of the above run before any
    error handling handler is bound so they will not show errors -->


    <title>{{T("page_title")}}</title>
    <link rel="stylesheet" href="/{{asset("assets/style.css")}}">
    <!-- preload this huge font -->
    <link rel="preload" href="/assets/nintendo_NTLG.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!-- I THINK THIS DESCRIPTION SHOULD BE THE SAME AS ONE ON THE PAGE?
    -->
    <!-- TODO CHANGE THIS, I WROTE THIS AND IT IS OUTDATED -->
    <meta name="description" content="This site renders Mii images
    in Wii U style, with many expressions to choose from.
    It accepts Mii data from your old NNID (Wii U/3DS account),
    a Mii QR Code, or even a Pretendo Network ID.">
    <meta name="keywords" content="
    Mii, Mii Renderer, Mii QR, Mii Image,
    Mii Data, Mii Base64, Mii Hex,
    3DS, Wii U,
    Check Mii Out Channel, Mii Grabber,
    Arian Kordi, PF2M, Closedverse, Arian Closedverse, Pretendo,
    Miiverse, Nintendo Network ID">

    <!-- THESE KEYWORDS ARE FOR FUTURE USE, TODO EXPAND UPON THEM LATER
    <meta name="keywords" content="
    Mii, Mii Renderer, Wii Character, Mii Character, Mii QR, Mii Image,
    Mii Data, Mii Base64, FFSD File, CFSD File, FFLStoreData, CFLStoreData,
    Wii RFL, 3DS CFL, Wii U FFL, Miitomo AFL, Switch nn::mii,
    Wii, 3DS, Switch, Wii U, Miitomo, Tomodachi Life, Miitopia,
    Mii Maker, Mii Channel, Mii Creator, Mii Studio, Mii Library,
    Check Mii Out Channel, Mii Grabber, Miiverse Clone, Miiverse Revival,
    Arian Kordi, PF2M, Closedverse, Arian Closedverse, Pretendo,
    WiiConnect24, Miiverse, Nintendo Network, NNID,
    Nintendo Account ID, 3DS Account, Wii U Account">
    -->

    <!-- NOTE: default locale -->
    <meta property="og:locale" content="en_US">
    {{range _, lang := .LanguageStringsUnderscore}}
    <meta property="og:locale:alternate" content="{{lang}}">
    {{end}}
    <meta property="og:url" content="https://mii-unsecure.ariankordi.net/">
    <meta property="og:image" content="/assets/page-screenshot-2024-08-24-dark.png">
    <!-- TODO BELOW IS TO BE LOCALIZED -->
    <meta property="og:title" content="{{T("page_title")}}">

    <meta name="og:description" content="That's right, we will render your Miis with our bare f*cking hands.
This isn't just any ðŸ¤“ 'Mii Renderer' ðŸ¤“, that actually just uses the sh*t*ss Mii Studio API. NO. This runs on MY COMPUTER. On MY very own IntelÂ® Coreâ„¢ i7-1185G7 Intel IrisÂ® Xáµ‰ Graphicsâ„¢. And guess what? It can run on yours too, since the renderer is entirely open source.">
    <link rel="alternate" hreflang="x-default" href="https://mii-unsecure.ariankordi.net/">
    {{range _, lang := .LanguageStrings}}
    <link rel="alternate" hreflang="{{lang}}" href="https://mii-unsecure.ariankordi.net/?locale.lang={{lang}}">
    {{end}}

    <!-- add error handling js before anything else is loaded
         also have somewhat tried to make it backwards compatible -->
    <script>
        // handle all errors and show them at the top of the page
        window.addEventListener('error', function(event) {
            var errorContainer = document.getElementById('error-container');
            var errorMessage = document.getElementById('error-message');
            var errorStacktrace = document.getElementById('error-stacktrace');
            var errorAt = document.getElementById('error-at');
            errorMessage.textContent = event.message;
            // show stack trace if it has one
            if(event.error) {
                errorStacktrace.textContent = event.error.stack;
                errorStacktrace.style.display = '';
            } else {
                // otherwise just use error's line number
                errorAt.textContent = (event.source + ':' + event.lineno + ':' + event.colno);
                errorAt.style.display = '';
            }

            // un-hide the error container
            errorContainer.style.display = '';
        });
    </script>
</head>

<body {{ if .IframeMode }}data-iframe-mode style="background-color: transparent;"{{end}}>
    <h1>{{T("heading_main")}}</h1>
    <!-- test if current language is not english -->
    {{if (T("html_lang")) != "en-US" && (T("html_lang")) != "en-GB"}}
    <h2 class="subtitle">Mii Renderer</h2>
    {{end}}

    <div id="error-container" style="display: none;">
        <h1 style="color: red;">{{T("error_container_title")}}</h1>
        <div id="error-message" style="color: red;"></div>
        <pre id="error-stacktrace" style="display: none;"></pre>
        <pre id="error-at" style="display: none;">At <span></span></pre>
    </div>

    <form action="/miis/image.png" method="GET">
        <input type="hidden" id="errorSessionAndRequestID" name="erri">

        <div style="color: plum;">{{T("above_input_type_choose_text")}}</div>
        <label for="input-type">{{T("label_input_type")}}</label>
        <!-- only useful for backend when you are not using js bc js will disable the inputs -->
        <select id="input-type"><!-- name="input-type">-->
            <option value="nnid"
                {{if .GroupEnabled == "nnid"}}selected{{end}}
                >{{T("option_nnid")}}ðŸ•°</option>
            <!-- nnid above is default -->
            <option value="pnid"
                {{if .GroupEnabled == "pnid"}}selected{{end}}
                >{{T("option_pnid")}}</option>
            <option value="data"
                {{if .GroupEnabled == "data"}}selected{{end}}
                >{{T("option_data")}}</option>
            <option value="qrcode"
                {{if .GroupEnabled == "qrcode"}}selected{{end}}
                >{{T("option_qrcode")}}</option>
            <option value="nfp"
                {{if .GroupEnabled == "nfp"}}selected{{end}}
                >{{T("option_amiibo")}}</option>
        </select>
        <br>
        <!-- NOTE: even though the html is setting style for groups... -->
        <!-- the js is STILL RESPONSIBLE for DISABLING THE FORM ELEMENTS -->
        <div id="data-group" {{if .GroupEnabled != "data"}}style="display: none;" {{end}}>
            <label class="small" for="file"><b>{{T("file_input_label")}}</b></label><br>
            <input class="long-field" type="file" id="file">
            <input type="hidden" name="data" id="file-data">

            <div id="file-loaded" style="font-weight: bold; color: green; display: none;">{{T("loaded_mii_file")}}<span></span></div>

            <div><label class="small" for="data"><b>{{T("enter_data_in_hex_or_base64")}}</b></label></div>
            <input class="long-field green-border" id="data" type="text" name="data"
                placeholder="{{T("data_placeholder")}}"
                value="AwBgMIJUICvpzY4vnWYVrXy7ikd01AAAWR1KAGEAcwBtAGkAbgBlAAAAAAAAABw3EhB7ASFuQxwNZMcYAAgegg0AMEGzW4JtAAAAAAAAAAAAAAAAAAAAAAAAAAAAAML0">
            <div id="data-loaded" style="font-weight: bold; color: green; display: none;">{{T("loaded_mii_data")}}<span></span></div>

            <span class="small">{{T("click_on_label_to_select_field")}}</span>


            <details>
                <summary>{{T("support_summary")}}</summary>

            <ul style="padding: 0; text-align: left; font-size: 13px; line-height: 150%;">
                <li>3DS/Wii U
                    <ul>
                        <li>(CFL/FFL)StoreData, (CFLi/FFLi)MiiDataOfficial,
                        nn::mii::Ver3StoreData</li>
                        <li>96 bytes: .cfsd, .ffsd
                            <ul><li><b>NOTE: </b>.ffsd is the same as .cfsd.</li></ul>
                        </li>
                        <li>92 bytes: .3dsmii, .cfcd</li>
                        <li>Miis stored in Mii Maker databases (Wii U/maybe 3DS) are 92 bytes, but big endian - won't work here for now.</li>
                    </ul>
                </li>
                <li>Wii
                    <ul>
                        <li>RFLCharData, RFLStoreData</li>
                        <li>74 bytes: .rcd, .miigx, .mii, .mae</li>
                        <li>76 bytes: .rsd</li>
                        <li>DS data is the same structure as RFLCharData but all fields are little endian - it is not supported.</li>
                    </ul>
                </li>
                <li>Switch
                    <ul>
                        <li>nn::mii::CharInfo, nn::mii::CoreData, nn::mii::StoreData</li>
                        <li>88 bytes: .charinfo, .ufsd</li>
                        <li>48 bytes: CoreData/.nfcd</li>
                        <li>68 bytes: StoreData/.nfsd</li>
                    </ul>
                </li>
                <li>Mii Studio
                    <ul>
                        <li>Encoded/URL format: 47 characters</li>
                        <li>46 bytes: .mnms (decoded format)</li>
                        <li>Doesn't support hex data from a .txt file (just paste the hex in the data field and it should work there)</li>
                        <li><b>NOTE: This DOES NOT, and WILL NEVER support 8-character Nintendo Account/Mii Studio IDs.</b> Unfortunately, those do not provide the Mii data we need.
                        <ul><li>If you need to obtain a Mii Studio code, I like the guide from <a href="https://limes.pink/spinmii">SpinMii: navigate here and click on the question mark on the top right corner.</a> Use the "data-params" as the input to this site.</li>
                        </li>
                    </ul>
                </li>
            </ul>

            </details>
        </div>
        <div id="qrcode-group" {{if .GroupEnabled != "qrcode"}}style="display: none;" {{end}}>
            <label class="small" id="start-camera-label" for="start-camera"><b>{{T("open_camera_label")}}</b></label>
            <label class="small" id="stop-camera-label" for="stop-camera" style="display: none;"><b>{{T("close_camera_label")}}</b></label>
            <br>
            <button id="start-camera" type="button">{{T("button_open_camera")}}</button>
            <button id="stop-camera" type="button" style="display: none;">{{T("button_close_camera")}}</button>
            <br>
            <div id="qr-camera-group" style="display: none">
                <label for="cam-list">{{T("label_select_camera")}}</label>
                <select id="cam-list">
                    <option value="environment" selected>{{T("option_back_camera")}}</option>
                    <option value="user">{{T("option_front_camera")}}</option>
                </select>
                <video id="qr-video" style="max-width: 100%"></video>
            </div>
            <span class="small"><b>{{T("file_photo_selection_prompt")}}</b></span>
            <input type="file" id="qr-file" accept="image/*">

            <!-- QR code statuses -->
            <div id="qr-status-ready" style="font-weight: bold;">{{T("status_ready")}}</div>
            <div id="qr-status-scanning" style="font-weight: bold; color: blue; display: none;">{{T("qr_status_scanning")}}</div>
            <div id="qr-status-waiting" style="font-weight: bold; color: orange; display: none;">{{T("qr_status_waiting")}}</div>
            <div id="qr-status-loaded" style="font-weight: bold; color: green; display: none;">{{T("qr_status_loaded")}}<span></span></div>

            <div id="qr-notice-size" style="color: indianred; display: none;">{{T("qr_status_loaded")}}<span></span></div>

            <div id="qr-status-no-qr" style="font-weight: bold; color: red; display: none;">{{T("qr_status_no_qr")}}</div>
            <div id="qr-status-error" style="font-weight: bold; color: red; display: none;">{{T("qr_status_error")}}<span></span></div>
            <div id="qr-status-no-mii" style="font-weight: bold; color: red; display: none;">{{T("qr_status_no_mii")}}<span class="small"></span></div>
            <div id="qr-status-no-camera" style="font-weight: bold; color: red; display: none;">{{T("qr_status_no_camera")}}</div>


            <input type="hidden" name="data" id="qrcode">
        </div>
        <div id="nnid-group" {{if .GroupEnabled != "nnid"}}style="display: none;" {{end}}>
            <!-- you may want to add labels to differentiate in the case of no js -->
            <input id="nnid" name="nnid" class="long-field" type="text" placeholder="{{T("nnid_placeholder")}}" value="JasmineChlora"
                maxlength="16" pattern="^[0-9a-zA-Z\-_.]+$" required
                data-action="/mii_data/">
            <!-- tbd you should add or check minlength
                   it was temporarily removed bc its annoying to see
                  red before you are finished typing -->
            <br>
            <input type="hidden" name="data" id="nnid-data">
            <!-- TODO THIS SHOULD PROBABLY SEND A RANDOM NUMBER? with JS -->
            <!--<input type="checkbox" id="force_refresh" name="force_refresh" value="1">
            <label for="force_refresh">{{T("force_refresh_label")}}</label>
            <br><span class="small">{{T("force_refresh_description")}}</span>
            -->
            <button id="random-nnid" type="button" data-action="/mii_data_random">{{T("button_random_nnid")}}</button>
            <div id="nnid-loaded" style="font-weight: bold; color: green; display: none;">{{T("qr_status_loaded")}}<span></span></div>
            <div id="nnid-last-modified" style="font-weight: bold; display: none;">{{T("last_modified")}}<span></span></div>
            <h3 style="margin: 0;">ðŸ•° {{T("miis_from_nnids_prior_notice")}}</h3>
            <!--<details>
              <summary style="font-weight: bold;">
                This will only show Miis from NNIDs
                as they were prior to April 8th, 2024.
                Read more here.
              </summary>
              <p>As of 2024-05-09 (possibly earlier), Nintendo shut down the API endpoint
              that this site and everything else, including Miiverse clone, used to
              look up Mii images from NNIDs.</p>
              <p>Personally, I had kinda sorta somewhat prepared for this. On April 8th,
              the day of the Nintendo Network game server shutdown, I went ahead
              and archived every Mii from the Friend Presence server.</p>
              <p>Do you know how the Wii U Friends List shows Miis from any NNID,
              regardless of whether they were made on a 3DS or if it was even deleted?
              It's not getting it through /v1/api/miis, because that will not
              show you deleted NNIDs.</p>
            </details>-->
        </div>
        <div id="pnid-group" {{if .GroupEnabled != "pnid"}}style="display: none;" {{end}}>
            <!-- you may want to add labels to differentiate in the case of no js -->
            <input id="pnid" name="nnid" class="long-field" type="text"
                placeholder="{{T("input_pnid_placeholder")}}"
                maxlength="16" pattern="^[0-9a-zA-Z\-_.]+$" required
                value="PN_Jon" data-action="/mii_data/">
            <!-- DIFFERENTIATES between NNID and PNID request -->
            <!-- TODO: disabled for now because this interferes when js is not there to disable it by default
            but perhaps all other fields should be disabled by default -->
            <input name="api_id" type="hidden" value="1" disabled>
            <br>
            <input type="hidden" name="data" id="pnid-data">

            <div id="pnid-loaded" style="font-weight: bold; color: green; display: none;">{{T("qr_status_loaded")}}<span></span></div>

            <!-- TODO THIS SHOULD PROBABLY SEND A RANDOM NUMBER? with JS -->
            <input type="checkbox" id="force_refresh_pnid" name="force_refresh" value="1">
            <label for="force_refresh_pnid">{{T("label_force_refresh_pnid")}}</label>
            <br><span class="small">{{T("force_refresh_description")}}</span>
            <br><span>{{T("pretendo_network_description")}}
              <a target="_blank" href="https://pretendo.network/">pretendo.network</a>
            </span>
        </div>
        <div id="nfp-group" {{if .GroupEnabled != "nfp"}}style="display: none;" {{end}}>
            <label class="small" for="nfp-file"><b>{{T("nfp_file_label")}}</b></label><br>
            <input class="long-field" type="file" id="nfp-file" required>
            <input type="hidden" name="data" id="nfp-file-data">
            <!-- while data is put in the url, data-REAL is used by the conversion routine -->
            <input type="hidden" name="data-REAL" id="nfp-file-data-with-ext">

            <div id="nfp-data-loaded" style="font-weight: bold; color: green; display: none;">{{T("nfp_data_loaded_label")}}<span></span></div>
            <div id="nfp-figure-loaded" style="font-weight: bold; color: green; display: none;">{{T("nfp_figure_loaded_label")}}<span></span></div>

            <div id="nfp-error" style="font-weight: bold; color: red; display: none;">{{T("nfp_error_label")}}<span></span></div>

            <details>
                <summary>{{T("nfp_tutorial_summary")}}</summary>
                <ol style="padding: 0; text-align: left; font-size: 13px; line-height: 150%;">
                    <li>Find an app that scans and lets you export amiibo files on your phone.
                        <ul>
                        <li>The following worked on my iPhone: <a target="_blank" href="https://apps.apple.com/us/app/amiiboss/id1579972834">AmiiBoss</a>, <a target="_blank" href="https://apps.apple.com/us/app/tagmiibo-write-nfc-tags/id1578966288">Tagmiibo</a>, <a target="_blank" href="https://apps.apple.com/us/app/amiibox-identify-write-nfc/id1580281187">Amiibox</a></li>
                        <li>For Android, <a target="_blank" href="https://play.google.com/store/apps/details?id=com.hiddenramblings.tagmo.eightbit">TagMo</a> will work but there are probably more out there.</li>
                        </ul>
                    </li>
                    <li>Install it and open itâ€¦
                        <ul>
                        <li>A lot of amiibo apps will nag that theyâ€™ll limit your writes or charge you for more writes.</li>
                        <li>If they do, then ignore it - they shouldnâ€™t charge you to merely scan your amiibo figure.</li>
                        <li>They also shouldn't ask you for a key just to scan, but if they do, let me knooowww...</li>
                        </ul>
                    </li>
                    <li>Scan your amiibo figure. Then, export it to a file.
                        <ul>
                        <li>AmiiBoss and Tagmiibo have a bar at the bottom letting you see what figures youâ€™ve scanned, then you can hit share on them.</li>
                        <li><i>(No instructions for TagMo or other Android apps right now, sorry)</i></li>
                        </ul>
                    </li>
                    <li>Upload it here. It should be 540 or 532 bytes.</li>
                    <li>If the file doesn't work, or there are any anomalies, <a href="#contact">please PLEASE let me know</a>! Let me know which app you used.
                    <ul><li class="small">(not ur fault i just want to support everything)</li></ul></li>
                </ol>
            </details>
        </div>
        <!-- these errors are used for file and data thus is being placed here -->
        <div id="data-error-size-mismatch" style="font-weight: bold; color: red; display: none;">
            {{T("data_error_size_mismatch")}}<span></span></div>
        <div id="data-error-invalid-checksum" style="font-weight: bold; color: red; display: none;">
            {{T("data_error_invalid_checksum")}}</div>
        <span id="crc16-checksum-failed-text" style="display: none;">{{T("crc16_failed")}}</span>

        <div id="data-error-size-0" style="font-weight: bold; color: red; display: none;">{{T("data_error_size_0")}}</div>
        <div id="data-error-size-540" style="font-weight: bold; color: red; display: none;">This data is 540 bytes long, and may be an amiibo file. We can decrypt amiibo now, choose the "amiibo Data" option and try again.</div>
        <div id="data-error-size-8" style="font-weight: bold; color: orangered; display: none;">Is this a Nintendo Account ID? If so, then I'm sorry, but this tool cannot support those. You will have to continue to use <a target="_blank" href="https://pf2m.com/tools/mii/">pf2m.com/tools/mii</a>.
        <br>Now, if this is a Mii Studio Mii, you will need to get its data instead of its ID. I like the guide from <a href="https://limes.pink/spinmii">SpinMii: navigate here and click on the question mark on the top right corner.</a> We need what they call "data-params". Thanks.</div>
        <div id="data-error-size-532" style="font-weight: bold; color: red; display: none;">This data is 532 bytes long, and may be an amiibo file, potentially decrypted. Choose the "amiibo Data" option and try again. If this still doesn't work, please let me know.</div>

        <div style="color: plum;" class="hide-iframe-mode">{{T("shader_lighting_type_above")}}</div>
        <label for="shaderType">{{T("shader_lighting_type_label")}}</label>
        <select name="shaderType" id="shaderType" data-default-value="0" data-save>
            <option value="0" selected>{{T("option_wii_u_miiverse")}}</option>
            <option value="3">{{T("option_wii_u_miiverse")}} (Blinn)</option>
            <option value="1">Switch</option>
            <option value="2">{{T("option_miitomo_mii_studio")}} (!)</option>
            <!--<option value="3">3DS</option>-->
        </select><br class="hide-iframe-mode">

        <label for="type" class="hide-iframe-mode">{{T("type_label")}}</label>
        <select name="type" id="type" class="hide-iframe-mode">
            <option value="face">{{T("option_face")}}</option>
            <option value="face_only">{{T("option_face_only")}}</option>
            <option value="fflmakeicon">{{T("option_fflmakeicon")}}</option>
            <option value="all_body_sugar">{{T("option_all_body")}}</option>
            <option value="all_body">Whole Body Alt</option>
            <option value="variableiconbody">Portrait Alt</option>
            <!-- variableiconbody = Portrait Alt -->
        </select><br class="hide-iframe-mode">
        <details class="hide-iframe-mode">
            <summary class="small">{{T("view_types_summary")}}</summary>
                <ul class="left-aligned-ul">
                    <li><b>Portrait: </b>This is what the API calls "face". Shows a Mii head and its body.
                        <ul>
                            <li>Aims to mirror the Mii Maker/NNID/cdn-mii 1.0.0 icon view for now, which should be close to Mii Studio.</li>
                        </ul>
                    </li>
                    <li><b>Head Only: </b>Shows a Mii's head without its body. Same view as portrait. (Close to Mii Studio face_only)
                        <ul>
                            <li>Mii Studio/cdn-mii 1.0.0/2.0.0's head_only has the same view as its "face", which is why this is face_only on the API.</li>
                        </ul>
                    </li>
                    <li><b>Head Only Alt: </b>Shows a Mii's head only, but using the same view that some Wii/U-era icons use. (Matches RFL/FFLMakeIcon)
                        <ul>
                            <li>The view/projection matrix from this is from the functions mentioned - it is slightly different than the portrait/face view.</li>
                        </ul>
                    </li>
                    <li><b>Portrait Alt: </b>Shows a Mii head and its body, slightly zoomed in.
                        <ul>
                            <li>Matches the Switch nn::mii::VariableIconBody icon renders, trying to hide the legs because that function doesn't render them.</li>
                        </ul>
                    </li>
                    <li><b>Whole Body: </b>Shows a shot of a Mii's entire body, using 3:4 aspect ratio.
                        <ul>
                            <li>Aims to match NNID/cdn-mii 1.0.0 renders, although, it seems that on those, the camera goes closer/further depending on how much shorter/taller the Mii is, and this isn't replicated one-to-one.</li>
                        </ul>
                    </li>
                    <li><b>Whole Body Alt: </b>Shows a more zoomed-out shot of a Mii's entire body that's a square image and actual size.
                        <ul>
                            <li>Aims to match Mii Studio/cdn-mii 2.0.0, though not perfectly accurate either and not recommended over the previous one.</li>
                        </ul>
                    </li>
                </ul>
        </details>
        <label for="expression" class="hide-iframe-mode">{{T("expression_label")}}</label>
        <select name="expression" id="expression" class="hide-iframe-mode" data-default-value="normal">
            <option value="normal">{{T("expression_normal")}}</option>
            <option value="smile">{{T("expression_smile")}}</option>
            <option value="anger">{{T("expression_anger")}}</option>
            <option value="sorrow">{{T("expression_sorrow")}}</option>
            <option value="surprise">{{T("expression_surprise")}}</option>
            <option value="blink">{{T("expression_blink")}}</option>
            <option value="normal_open_mouth">{{T("expression_normal_open_mouth")}}</option>
            <option value="smile_open_mouth">{{T("expression_smile_open_mouth")}}</option>
            <option value="anger_open_mouth">{{T("expression_anger_open_mouth")}}</option>
            <option value="surprise_open_mouth">{{T("expression_surprise_open_mouth")}}</option>
            <option value="sorrow_open_mouth">{{T("expression_sorrow_open_mouth")}}</option>
            <option value="blink_open_mouth">{{T("expression_blink_open_mouth")}}</option>
            <option value="wink_left">{{T("expression_wink_left")}}</option>
            <option value="wink_right">{{T("expression_wink_right")}}</option>
            <option value="wink_left_open_mouth">{{T("expression_wink_left_open_mouth")}}</option>
            <option value="wink_right_open_mouth">{{T("expression_wink_right_open_mouth")}}</option>
            <option value="like_wink_left">{{T("expression_like_wink_left")}}</option>
            <option value="like_wink_right">{{T("expression_like_wink_right")}}</option>
            <option value="frustrated">{{T("expression_frustrated")}}</option>
            <option value="ðŸ¥º">ðŸ¥º</option>
        </select><br class="hide-iframe-mode">
        <label class="hide-iframe-mode" for="resolution-slider">{{T("resolution_slider_label")}}</label>
        <input class="hide-iframe-mode" id="resolution-slider" type="range" min="96" max="1080" step="16" value="270">
        <input class="short-number hide-iframe-mode" name="width" id="width" type="number" step="2" value="270" data-save>
        <label for="width" class="hide-iframe-mode">px</label>
        <br class="hide-iframe-mode">
        <div>
            <label for="bgColor">{{T("background_color_label")}}</label>
            <input name="bgColor" id="bgColor" type="color" value="#ffffff">
            <label for="transparent-checkbox">{{T("transparent_checkbox_label")}}</label>
            <input id="transparent-checkbox" type="checkbox" checked>
        </div>


        <!--
        <label>{{T("background_color_opacity")}}<input name="bgColorOpacity" type="range" min="0" max="255" value="0">
        <span class="small">0</span>
        </label>
        <br>
        -->
        <label for="clothesColor">{{T("clothes_color")}}</label>
        <select id="clothesColor" name="clothesColor" data-default-value="default">
            <option value="default">{{T("default")}}</option>
            <option value="red">{{T("red")}}</option>
            <option value="orange">{{T("orange")}}</option>
            <option value="yellow">{{T("yellow")}}</option>
            <option value="yellowgreen">{{T("light_green")}}</option>
            <option value="green">{{T("dark_green")}}</option>
            <option value="blue">{{T("dark_blue")}}</option>
            <option value="skyblue">{{T("light_blue")}}</option>
            <option value="pink">{{T("pink")}}</option>
            <option value="purple">{{T("purple")}}</option>
            <option value="brown">{{T("brown")}}</option>
            <option value="white">{{T("white")}}</option>
            <option value="black">{{T("black")}}</option>
        </select>
        <br>
        <label for="pantsColor">Pants color: </label>
        <select id="pantsColor" name="pantsColor" data-save data-default-value="red">
            <option value="gray">Gray</option>
            <option value="red" selected>{{T("red")}}</option>
            <option value="blue">{{T("dark_blue")}}</option>
            <option value="gold">Gold</option>
        </select>

        <div id="pants-colors-with-switch-shader-inaccurate" style="color: red; display: none;" class="small hide-iframe-mode">Note that red and blue pants don't work on the Switch shader thanks to the stupid hardcoded sssColor and specularColor tables that I don't know how to recalculate</div>

        <details id="rotation-controls-details" data-save data-default-value="0">
            <summary>{{T("rotation_controls")}}</summary>
            <div style="font-size: 14px;">
                <label for="characterXRotate">{{T("character_x_rotation_label")}}</label>
                <input id="characterXRotate-slider" type="range" min="0" max="360" value="0" data-default-value="0">
                <input class="short-number" name="characterXRotate" id="characterXRotate" type="number" value="0" data-default-value="0">
                <br>
                <label for="characterYRotate">{{T("character_y_rotation_label")}}</label>
                <input id="characterYRotate-slider" type="range" min="0" max="360" value="0">
                <input class="short-number" name="characterYRotate" id="characterYRotate" type="number" value="0" data-default-value="0">
                <br>
                <label for="characterZRotate">{{T("character_z_rotation_label")}}</label>
                <input id="characterZRotate-slider" type="range" min="0" max="360" value="0">
                <input class="short-number" name="characterZRotate" id="characterZRotate" type="number" value="0" data-default-value="0">

                <hr>

                <label for="cameraXRotate">{{T("camera_x_rotation_label")}}</label>
                <input id="cameraXRotate-slider" type="range" min="0" max="360" value="0" data-default-value="0">
                <input class="short-number" name="cameraXRotate" id="cameraXRotate" type="number" value="0" data-default-value="0">
                <br>
                <label for="cameraYRotate">{{T("camera_y_rotation_label")}}</label>
                <input id="cameraYRotate-slider" type="range" min="0" max="360" value="0">
                <input class="short-number" name="cameraYRotate" id="cameraYRotate" type="number" value="0" data-default-value="0">
                <br>
                <label for="cameraZRotate">{{T("camera_z_rotation_label")}}</label>
                <input id="cameraZRotate-slider" type="range" min="0" max="360" value="0">
                <input class="short-number" name="cameraZRotate" id="cameraZRotate" type="number" value="0" data-default-value="0">
                <details>
                    <summary>
                        <h4 style="margin: 0; display: inline;">{{T("rotation_difference_explanation")}}</h4>
                    </summary>
                    <div>{{T("rotation_explanation_detail")}}</div>
                </details>
            </div>
        </details>

        <details class="hide-iframe-mode">
            <summary>{{T("advanced_options")}}</summary>

            <div style="font-size: 13px;">

            <label for="scale">{{T("scale_label")}}</label>
            <input type="checkbox" name="scale" id="scale" value="1">
            <div class="smaller" style="margin-bottom: 5px;">{{T("scale_label_small")}}</div>

            <label for="resourceType">{{T("resource_type_label")}}</label>
            <select name="resourceType" id="resourceType" data-default-value="1">
                <option value="0">FFL_RESOURCE_TYPE_MIDDLE</option>
                <option value="1" selected>FFL_RESOURCE_TYPE_HIGH</option>
            </select><br>
            <div class="smaller">{{T("resource_type_note")}}</div>

            <label for="expression2">Miitomo expression:</label>

            <select id="expression2" data-override="expression" data-default-value="">
                <option value="">(Use original expression)</option>
                <!-- AFL/Miitomo expressions -->
                <option value="19">Bored</option>
                <option value="20">Bored open mouth</option>
                <option value="21">Sigh mouth straight</option>
                <option value="22">Sigh</option>
                <option value="23">Disgusted mouth straight</option>
                <option value="24">Disgusted</option>
                <option value="25">Love</option>
                <option value="26">Love mouth open</option>
                <option value="27">Determined mouth straight</option>
                <option value="28">Determined</option>
                <option value="29">Cry mouth straight</option>
                <option value="30">Cry</option>
                <option value="31">Big smile mouth straight</option>
                <option value="32">Big smile</option>
                <option value="33">Cheeky</option>
                <!-- <option value="34">Cheeky duplicate</option> -->
                <option value="35">Resolve eyes funny mouth</option>
                <option value="36">Resolve eyes funny mouth open</option>
                <option value="37">Smug</option>
                <option value="38">Smug mouth open</option>
                <option value="39">Resolve</option>
                <option value="40">Resolve mouth open</option>
                <option value="41">Unbelievable</option>
                <!-- <option value="42">Unbelievable duplicate</option> -->
                <option value="43">Cunning</option>
                <!-- <option value="44">Cunning duplicate</option> -->
                <option value="45">Raspberry</option>
                <!-- <option value="46">Raspberry duplicate</option> -->
                <option value="47">Innocent</option>
                <!-- <option value="48">Innocent duplicate</option> -->
                <option value="49">Cat</option>
                <!-- <option value="50">Cat duplicate</option> -->
                <option value="51">Dog</option>
                <!-- <option value="52">Dog duplicate</option> -->
                <option value="53">Tasty</option>
                <!-- <option value="54">Tasty duplicate</option> -->
                <option value="55">Money mouth straight</option>
                <option value="56">Money</option>
                <option value="57">Confused mouth straight</option>
                <option value="58">Confused</option>
                <option value="59">Cheerful mouth straight</option>
                <option value="60">Cheerful</option>
                <!-- <option value="61">Normal duplicate, maybe blank?</option> -->
                <!-- <option value="62">Normal duplicate, maybe blank? duplicate</option> -->
                <option value="63">Grumble mouth straight</option>
                <option value="64">Grumble</option>
                <option value="65">Moved mouth straight</option>
                <option value="66">Moved (aka pleading face)</option>
                <option value="67">Singing mouth small</option>
                <option value="68">Singing</option>
                <option value="69">Stunned</option>
            </select>
            <div class="smaller">
            <details>
                <summary>Not available with the middle resource. Selecting this will override the first expression choice. Click to reveal some slight inaccuracies with these.</summary>
                <ul class="left-justified-compact">
                    <li>Some expressions are supposed to set eyebrow colors, though I don't apply that and haven't found where that happens in libcocos2dcpp.so yet.</li>
                    <li>The orientation of the eyes and the eye positions are flipped from Miitomo.
                    <ul><li>However... this is actually a flaw with Miitomo in general.</li>
                    <li>If you test the wink left and wink right expressions in FFL and in Mii Studio, you will see that they are flipped on the Mii Studio API.</li>
                    <li>... However, I have specifically seen left defined as 12 and right defined as 13, in BOTH nn::mii and FFL enums, so between this and the other Miitomo expressions being flipped, AND the fact that some mask drawing routines were refactored in AFL...</li>
                    <li>I think it's safe to say that Miitomo is the one that has incorrectly flipped them. And currently I'm not sure how to elegantly deal with this. (set a bit in modelFlag?)</li></ul></li>
                    <li>The blank face expression is not working. I'm not sure how they do that, and I kind of inelegantly handle the case for cat/dog expressions removing the nose... bleh.</li>
                    <li>Finally, I don't have a great way to verify that these are pixel perfect (especiallly the ones not choosable by the user), I'm just comparing by eye in the Miifoto editor, so...</li>
                </ul>
            </details></div>
            <label for="modelType">{{T("head_model_type")}}:</label>
            <select name="modelType" id="modelType" data-default-value="normal">
                <option value="normal" selected>FFL_MODEL_TYPE_NORMAL</option>
                <option value="hat">FFL_MODEL_TYPE_HAT</option>
                <option value="face_only">FFL_MODEL_TYPE_FACE_ONLY</option>
            </select>
            <label style="display: inline-block;" for="flattenNose">{{T("flatten_nose")}}</label>
            <input type="checkbox" id="flattenNose" name="flattenNose" value="1" data-default-value="0">
            <div class="smaller">{{T("model_type_note")}}</div>

            <label for="drawStageMode">{{T("draw_stage_mode")}}:</label>
            <select name="drawStageMode" id="drawStageMode" data-default-value="all">
                <option value="all" selected>{{T("all")}}</option>
                <option value="opa_only">{{T("draw_opa_only")}}</option>
                <option value="xlu_only">{{T("draw_xlu_only")}}</option>
                <option value="mask_only">{{T("mask_only")}}</option>
            </select><br>
            <div class="smaller">{{T("draw_stage_note")}}</div>


            <label for="lightEnable">{{T("disable_lighting_label")}}</label>
            <input type="checkbox" name="lightEnable" id="lightEnable" value="0" data-default-value="0">
            <div class="smaller">{{T("disable_lighting_note")}}</div>

            <!--
            <label for="mipmapEnable">Enable mipmapping:</label>
            <input type="checkbox" name="mipmapEnable" id="mipmapEnable" value="0">
            <div class="smaller">I don't actually know what this does.</div>
            -->

            <label for="texResolution">{{T("texture_resolution_label")}}</label>
            <input id="texResolutionEnable" type="checkbox">
            <input class="short-number" name="texResolution" id="texResolution" type="number" step="2" value="270" disabled>
            <label for="texResolution">px</label>
            <div class="smaller">{{T("texture_resolution_note")}}</div>

            <label for="verifyCRC16">{{T("disable_crc16_label")}}</label>
            <input type="checkbox" name="verifyCRC16" id="verifyCRC16" value="0" data-default-value="0" data-save>
            <div class="smaller">{{T("disable_crc16_note")}}</div>

            <label for="verifyCharInfo">{{T("disable_charinfo_verify_label")}}</label>
            <!-- NOTE: in this case, data-default-value on checkboxes means if they are checked -->
            <input type="checkbox" name="verifyCharInfo" id="verifyCharInfo" value="0" data-default-value="0" data-save>

            <div class="smaller">{{T("disable_charinfo_verify_note")}}</div>

            </div>

        </details>

        <div id="shader-type-2-inaccurate" style="font-weight: bold; color: orange; font-size: 12px; display: none;" class="hide-iframe-mode">{{T("miitomo_shader_inaccurate_note_pre_link")}}<a href="#accuracy-status">{{T("miitomo_shader_inaccurate_note_link")}}</a>{{T("miitomo_shader_inaccurate_note_post_link")}}
        <br><div style="font-size: 10px; line-height: 120%;">{{T("miitomo_shader_inaccurate_note_small")}}</div></div>
<!-- TODO: AUTO-SUBMIT NOT IMPLEMENTED
        <label for="auto-submit"><b>{{T("auto_submit_label")}}</b></label>
        <input id="auto-submit" type="checkbox">
        <br>
-->
        <input id="submit" type="submit" data-value="{{T("submit_button_text")}}">
    </form>
    <hr class="hide-iframe-mode">
    <h3>{{T("outputs_section_heading")}}</h3>
    <ul id="results" class="results hide-iframe-mode">

        <li id="result-template" style="display: none;">
            <div class="image-template entire-width">
                <!-- js appends the image element in here -->
            </div>
            <!-- the last argument controls whether to remove that as a query param -->
            <button onclick="handleCopyButtonAndUpdateText(event, undefined, 'erri')">
                <span class="text-copy">{{T("copy_image_url")}}</span>
                <span class="text-copied" style="display: none;">{{T("copied")}}</span>
            </button>
            <details ontoggle="handleConvertDetailsToggle(event)">
            <summary style="font-size: 18px;">
                {{T("convert_label")}}<span style="color: plum;"></span>
            </summary>
            <div class="hide-iframe-mode">
                <div style="margin: 5px;">{{T("input_data_type_label")}}<br><code class="input-type no-break-all">{{T("input_data_type_unknown")}}</code></div>
                <!--
                <label for>{{T("convert_to_label")}}</label><select>
                <option>{{T("convert_to_default")}}</option>
                <option></option>
                </select>
                -->
                <ul class="left-justified-compact">
                <li style="margin: 5px;">
                    {{T("studio_render_label")}}
                    <button onclick="handleCopyButtonAndUpdateText(event)">
                    <span class="text-copy">{{T("copy_image_url")}}</span>
                    <span class="text-copied" style="display: none;">{{T("copied")}}</span>
                    </button>
                    <img class="image-80" alt="{{T("studio_render_label")}}" data-src="https://studio.mii.nintendo.com/miis/image.png?type=face&width=96&data=">
                </li>
                <li>

                <form class="model-download-button" method="POST" style="display: inline;">
                    <button type="submit">
                        {{T("download_model")}}
                    </button>
                </form>
                </li>
                <li>{{T("studio_code_label")}}
                    (for <a target="_blank" href="https://heyimheroic.github.io/MiiStudioMiiLoader/">Mii Studio Mii Loader</a>)
                <code class="studio-code code-block"></code></li>
                <li>
                    <button class="download-studio-data" onclick="handleDownloadDataFileButton(event)" data-filename="Mii.mnms">
                    {{T("download_prefix")}}.mnms
                    </button>

                    <button class="download-switch-charinfo" onclick="handleDownloadDataFileButton(event)" data-filename="Mii.charinfo">
                    {{T("download_prefix")}}.charinfo
                    </button>

                    <button class="download-ffsd" onclick="handleDownloadDataFileButton(event)" data-filename="Mii.ffsd">
                    {{T("download_prefix")}}.ffsd
                    </button>
                </li>
                <li><a class="mii-instructions-link" target="_blank" href="https://miiinstructions.sticksweb.site/?data=">{{T("see_instructions")}}</a></li>
                <li>{{T("post_convert_fflstoredata_label")}}<code class="ver3storedata code-block"></code></li>
                <!-- TODO 2024-08-25: IMPLEMENT THIS ASAP IF YOU WANT WII MIIS TO SCAN ON 3DS SYSTEMS ..........
                <li>
                    <label>Always regenerate Mii ID: </label>
                    <input type="checkbox" name="remake-mii-id">
                    <div style="font-size: 10px;">Check this if the QR below doesn't scan on a 3DS. I apologize if it didn't! (Assigns CreateID to hash of data, always done for Switch/Studio input)</div>
                </li>
                -->
                <li style="margin: 5px;" class="image-qr-container">{{T("post_convert_qr_code_label")}}<div style="text-align: center;"><img class="image-qr" alt="{{T("post_convert_qr_code_label")}}"></div>
                </li>
                </ul>
            </div>
            </details>
        </li>



        <li id="tutorial" class="hide-iframe-mode">
            <div style="color: plum">{{T("tutorial_message")}}</div>
        </li>
        <li class="load-error" style="display: none">
            {{T("load_error_message")}}
            <br>
        </li>
    </ul>
    <hr class="hide-iframe-mode">
    <h3>{{T("samples_section_heading")}}</h3>
    <ul id="samples" class="results entire-width hide-iframe-mode">
        <li>
            <img style="width: 30%;" src="/assets/jasmine-sample-270-wiiu-no-aa.png" alt="Jasmine">
            <img style="width: 30%;" src="/assets/jasmine-sample-270-switch-variableiconbody-no-aa.png" alt="Jasmine">
            <img style="width: 30%;" src="/assets/jasmine-sample-270-miitomo.png" alt="Jasmine">
            <div style="color: hotpink;">{{T("our_output_description")}}
                <div class="small">{{T("under_our_render_small")}}</div>
            </div>
            <details>
                <summary><b>{{T("compare_with_official_renders_heading")}}</b></summary>
                <img style="width: 45%;" src="/assets/jasmine-sample-270-wiiu-no-aa.png" alt="Jasmine" loading="lazy">
                <img style="width: 45%;" src="/assets/jasmine-mii-maker-270.png" alt="Jasmine" loading="lazy">
                <div>{{T("label_left")}}<span style="color: hotpink;">{{T("label_our_render_lower")}}</span> {{T("label_right")}}<span style="color: indianred;">{{T("mii_maker_right_side_note")}}</span>
                    <div class="small">{{T("under_mii_maker_render_small")}}</div>
                </div>

                <img style="width: 45%;" src="/assets/jasmine-sample-270-switch-variableiconbody-no-aa.png" alt="Jasmine" loading="lazy">
                <img style="width: 45%;" src="/assets/jasmine-variableiconbodyexample-270.png" alt="Jasmine" loading="lazy">
                <div>{{T("label_left")}}<span style="color: hotpink;">{{T("label_our_render_lower")}}</span> {{T("label_right")}}<span style="color: indianred;">{{T("switch_render_right_side_note")}}</span>
                    <div class="small">{{T("under_switch_render_small")}}</div>
                </div>

                <img style="width: 45%;" src="/assets/jasmine-sample-270-miitomo.png" alt="Jasmine" loading="lazy">
                <img style="width: 45%;" src="/assets/jasmine-studio-270.png"
                    data-not-src="https://studio.mii.nintendo.com/miis/image.png?data=000d142a303f434b717a7b84939ba6b2bbbec5cbc9d0dee6fd0109090f16746f757c77737e747c696b767d747b828d&type=face&expression=normal&width=270" alt="Jasmine" loading="lazy">
                <div>{{T("label_left")}}<span style="color: hotpink;">{{T("label_our_render_lower")}}</span> {{T("label_right")}}<span style="color: indianred;">{{T("studio_render_right_side_note")}}</span>
                    <div class="small">{{T("under_studio_render_small")}}</div>
                </div>
            </details>
        </li>
    </ul>
    <script src="/{{asset("assets/script.js")}}"></script>
    <!--<script src="https://cdn.jsdelivr.net/gh/criteo-forks/qr-scanner/qr-scanner.umd.min.js"></script>-->
    <!-- async because it's not needed to RENDER the page
    ... but will be needed laaateerrrr.... -->
    <script async src="/{{asset("assets/qr-scan-handler.js")}}"></script>
    <!-- NOTE: qr-scan-handler actually does depend on qr-scanner AND sjcl both to work -->
    <script async src="/{{asset("assets/vendor-js/gh-criteo-forks-qr-scanner-qr-scanner.umd.min.js")}}"></script>
    <!-- TODO: this sjcl (manually crafted) bundle could be smaller if it contained less deps -->
    <!-- NOTE: both jses took manually from jsdelivr -->
    <script async src="/{{asset("assets/vendor-js/sjcl-108-min-plus-codecBytes.js")}}"></script>


    <!-- scripts for data conversion -->
    <!-- kaitai runtime -->
    <!-- NOTE: all of the kaitais below need this BEFORE THEY LOAD!!!! -->
    <script src="/{{asset("assets/vendor-js/KaitaiStream.min.js")}}"></script>
    <!-- scripts -->
    <script async src="/{{asset("assets/data-conversion.js")}}"></script>
    <!-- kaitai structs begin -->
    <!--
    <script async src="/{{asset("assets/kaitai-structs/js/Gen2Wiiu3dsMiitomo.js")}}"></script>
    <script async src="/{{asset("assets/kaitai-structs/js/Gen3Studio.js")}}"></script>
    <script async src="/{{asset("assets/kaitai-structs/js/Gen1Wii.js")}}"></script>
    <script async src="/{{asset("assets/kaitai-structs/js/Gen3Switch.js")}}"></script>
    <script async src="/{{asset("assets/kaitai-structs/js/Gen2Wiiu3dsMiitomoNfpstoredataextention.js")}}"></script>
    <script async src="/{{asset("assets/kaitai-structs/js/Gen3Switchgame.js")}}"></script>
    -->
    <script async src="/{{asset("assets/kaitai-structs/js/2024-09-07-all-compiled-kaitai-structs.min.js")}}"></script>
    <!-- qr code encoder for data conversion -->
{{ if .IframeMode == false }}
    <script async src="/{{asset("assets/vendor-js/qr.min.js")}}"></script>
{{end}}

    <!-- NOTE: this maboii script below
    contains the library AND handler for now -->
    <script async src="/{{asset("assets/vendor-js/maboii-from-ts-browser-port.js")}}"></script>

    <!-- just a joke and should not inhibit loading
    of any other scripts ples -->
    <script>
    // funny pranke
    console.log('%cDO NOT PASTE ANYTHING HERE!!!!!!!!!!',
                        'color: red; font-size: 90px;');
    console.log('%cHowever, if you know JavaScript, you should go here: '
                        // links to an image of steve jobs
                        + location.protocol + '//' + location.host + '/jobs',
            'color: lightskyblue; font-size: 40px;');
    </script>

    <hr class="hide-iframe-mode">

    <h2>{{T("welcome_to_site_header")}}</h2>
    <ul class="left-aligned-ul hide-iframe-mode">
        <li>You just found a Mii renderer powered by N*ntendo's official FFL library, decompiled by <a href="https://github.com/aboood40091">AboodXD</a>.</li>
        <li>See it on GitHub: <a href="https://github.com/ariankordi/FFL-Testing/tree/renderer-server-prototype">ariankordi/FFL-Testing (renderer-server-prototype branch)</a></li>
        <li>It has new shaders, support for all* Mii data types as well as Switch Miis, and it is completely self-hosted. If your site uses Mii icons, you can now render them on your own server!
        <ul>
            <li class="smaller">* Exceptions: DS (just Wii but endian-flipped to LE), Miis in 3DS/Wii U databases (also endian-flipped but to BE), any unofficial format, game-specific formats or any other one I'm not aware of.</li>
            <li>See the GitHub linked above for more details.</li>
        </ul></li>

        <li>
            <details style="display: inline;">
            <summary>Interested? Click to read more...</summary>
            <ul>
                <li>This website is running on the code linked above. I've tried to make the API compatible with Mii Studio.
                <ul>
                    <li>This means that it should work as a drop-in replacement wherever you use the Mii Studio API. If it doesn't work as that for you, please <a href="#contact">contact me</a>.</li>
                    <li>Feel free to use it however you seek fit, though, for the love of all that is holy, <b>do NOT rely on the site being up!!!</b></li>
                <li>Also, you may omit unnecessary parameters. The <code>erri</code> parameter is not needed at all.</li>
                </ul></li>
                <li>Thanks to our dear AboodXD, the official Mii renderer on Wii U, FFL (Cafe Face Library) has been decompiled and ported to OpenGL 3.3.</li>
                <li><a href="https://github.com/ariankordi/FFL-Testing">FFL-Testing</a> is the program he made to demo it: all it does is spin Mii heads in a window. My fork linked previously contains build instructions, as well as ports of the libraries involved to more systems.</li>
                <li>The Wii U shader has been decompiled as FFLShader.vert/frag, and the uniforms needed to use it are in src/Shader.cpp. Feel free to use it for any other projects.</li>
                <li>Likewise, the renderer-server-prototype branch contains the same for Switch and Miitomo shaders.</li>
                <li>I feel like I had a lot more to say here but I uhhhh don't for now...</li>
            </ul>

            </details>
        </li>
        <li>
            <b>Do you want to help?</b> If you want to give me advice or lend a hand with: frontend design/UX, help with OpenGL/C++, porting to WebGL, <a href="#contact">please get in touch!</a>
        </li>
    </ul>

    <h2>{{T("contact_me_header")}}</h2>
    <div id="contact" class="hide-iframe-mode">
        <ul class="left-aligned-ul">
            <li>This project/site is maintained by just me, Arian Kordi - yes, that one...
            <ul>
            <li class="smaller">If you're going to contact me, don't ask me about the site that rhymes with "Clone Worst", alright?</li>
            </ul></li>
            <li>{{T("contact_info_label")}}
            <ul>
                <li><b>Discord: ".arian."</b>
                </li>
                <li><b>Email: ariankordi@ariankordi.net</b></li>
            </ul></li>
            <li>{{T("contact_info_post")}}</li>
        </ul>
    </div>

    {{ include "index-accuracy-section.html" }}

    <h2>{{T("credits_header")}}</h2>
    <section id="credits" class="hide-iframe-mode">
    <ul class="left-aligned-ul">
        <li>Renderer backend made by me: <a href="https://github.com/ariankordi/FFL-Testing/tree/renderer-server-prototype">ariankordi/FFL-Testing (renderer-server-prototype branch)</a></li>
        <li>FFL Mii rendering library decompiled and ported to OpenGL by <a href="https://github.com/aboood40091">AboodXD</a>: <a href="https://github.com/aboood40091/ffl/tree/nsmbu-win-port">aboood40091/ffl</a></li>
        <li>Conversion tables to Ver3 and other nn::mii/Switch structs, reversed by Genwald: <a href="https://github.com/Genwald/MiiPort/blob/4ee38bbb8aa68a2365e9c48d59d7709f760f9b5d/include/convert_mii.h#L8">MiiPort > convert_mii.h</a>, <a href="https://github.com/Genwald/MiiPort/blob/4ee38bbb8aa68a2365e9c48d59d7709f760f9b5d/include/mii_ext.h">mii_ext.h</a></li>
    </ul>
    <h4>For client-side site:</h4>
    <ul class="left-aligned-ul">
        <li>
            mii2studio authors: <a href="https://github.com/bennyman123abc">bendevnull</a>, <a href="https://github.com/HEYimHeroic">HEYimHeroic</a>, <a href="https://github.com/larsenv">Larsenv</a>, <a href="https://github.com/matthe815">Matthe815</a>
        <ul>
            <li>For all Mii Kaitai structs used in the client-side JS.</li>
            <li>I modified <a href="https://github.com/ariankordi/mii2studio/blob/master/gen2_wiiu_3ds_miitomo.ksy">gen2_wiiu_3ds_miitomo.ksy</a> to fix accuracy.</li>
        </ul></li>
        <li><a href="https://github.com/kazuki-4ys">kazuki-4ys</a>:
            <ul>
                <li><a href="https://github.com/kazuki-4ys/kazuki-4ys.github.io/blob/148dc339974f8b7515bfdc1395ec1fc9becb68ab/web_apps/MiiInfoEditorCTR/mii.js#L103">MiiInfoEditorCTR > mii.js > miiEncode()</a></li>
                <li>Modified to encode 3DS/Wii U store data from the Kaitai struct.</li>
            </ul>
        </li>
        <li><a href="https://github.com/jaames">jaames</a> for the original <a href="https://gist.github.com/jaames/96ce8daa11b61b758b6b0227b55f9f78">Mii QR code decryption Python script</a>.</li>
        <li>All other non-Mii-specific code should be referenced in the HTML, but here they are anyway:
        <ul>
            <li class="small">
                <a href="https://github.com/Entrivax/maboii.js"><b>maboii.js</b> (provides amiibo decryption)</a>,
                <a href="https://github.com/bitwiseshiftleft/sjcl">SJCL (Stanford JS Crypto Library)</a>,
                <a href="https://github.com/kaitai-io/kaitai_struct_javascript_runtime">Kaitai JS Runtime</a>,
                <a href="https://github.com/criteo-forks/qr-scanner/tree/952ce7e4414ea18fbf658b7eae3adcf838becd39">qr-scanner (criteo-forks branch)</a>,
                <a href="https://github.com/educastellano/qr.js">qr.js (encoder)</a>
            </li>
        </ul></li>
        <li class="small">(Translations for the site are machine translated. Please reach out if you want to improve them!)</li>
    </ul>
    </section>

    <br class="hide-iframe-mode"><br class="hide-iframe-mode">
    <hr class="hide-iframe-mode">
    <h3>ðŸŒŽ {{T("change_language")}}</h3>

    <form method="GET" class="hide-iframe-mode">
        <select id="language" name="locale.lang">
            <!-- Conditionally set selected based on T("html_lang") -->
            <option value="en-US" {{if T("html_lang") == "en-US"}}selected{{end}}>English (US)</option>
            <option value="en-GB" {{if T("html_lang") == "en-GB"}}selected{{end}}>English (UK)</option>
            <option value="es-419" {{if T("html_lang") == "es-419"}}selected{{end}}>EspaÃ±ol (LATAM)</option>
            <option value="pt-BR" {{if T("html_lang") == "pt-BR"}}selected{{end}}>PortuguÃªs (Brasil)</option>
            <option value="fr-FR" {{if T("html_lang") == "fr-FR"}}selected{{end}}>FranÃ§ais</option>
            <option value="ja-JP" {{if T("html_lang") == "ja-JP"}}selected{{end}}>æ—¥æœ¬èªž ðŸ¥º</option>
        </select>
        <input type="submit">
    </form>

    <br class="hide-iframe-mode"><hr class="hide-iframe-mode">
    <p>This project is not associated with Nintendo.</p>

    <meta itemprop="arianhandler-html-path" content="/{{asset("assets/warioland3/complicated.html")}}">

    <!-- padding after language select form -->
    <br class="hide-iframe-mode">

</body>
</html>
