    <section id="accuracy-status" class="hide-iframe-mode">
        <h2>Accuracy Status/Known Flaws</h2>
        <p>Current goals are to perfectly reproduce Wii U Mii Maker/NNID renders, Mii Studio/Miitomo renders, and Switch icon renders.</p>
        <ul class="left-aligned-ul">
            <li>
            ‚ùå NO PANTS COLORS
            <ul>
                <li>Wii U Mii Maker draws the pants and torso separately but it's one model.</li>
                <li>They are using the skeleton to separate those, so, it depends on this:</li>
            </ul>
            </li>
            <li>
            ‚ùå Body is not scaled using bone weights from skeleton
            <ul>
                <li>This is why the body's arms may look a little wonky and unnatural.</li>
                <li>Need to use the skeleton from MiiBodyMiddle.bfres (MK8/Wii U Mii Maker)
                <li class="small">So I need to find something that extracts these from the bfres. The <a href="https://github.com/nw4f/G3d">NW4F G3d decomp</a> has no documentation and needs a major refactor to work on 64-bit, the only other thing I can find is Switch Toolbox which is in C#.</li>
            </ul>
            </li>
            <li>
            ‚ö†Ô∏è Default portrait view isn't accurate to Wii U Mii Maker
            <ul>
                <li>Initialization is done here in ffl_app.rpx:</li>
                <li>FFLUtility: <code>FUN_0210a9b4</code> (I think)</li>
                <li>Wii U Mii Maker, US latest ver: <code>FUN_02086e9</code></li>
                <li class="small">Side note: I think this is very similar to the one Mii Studio is using, except it uses it for face AND face only. Comparison: <a href="https://web.archive.org/web/20170521213000im_/https://cdn-mii.accounts.nintendo.com/1.0.0/miis/8ed7ef7660b3b2cf/image/1dd84ae2a599e70f-ebcc0c4f725b6b02.png?type=face&expression=normal&width=512&instanceCount=1&instanceRotationMode=model">Mii Maker/NNID/cdn-mii 1.0.0 (all the same)</a> vs <a href="https://cdn-mii.accounts.nintendo.com/2.0.0/miis/8ed7ef7660b3b2cf/image/1dd84ae2a599e70f-ebcc0c4f725b6b02.png?type=face&expression=normal&width=512&instanceCount=1&instanceRotationMode=model">cdn-mii 2.0.0/Mii Studio</a></li>
            </ul>
            </li>
            <li>
            ‚ö†Ô∏è Need to find whole body camera view for Wii U Mii Maker and potentially Miitomo (Mii Studio)
            <ul>
                <li>Unfortunately it isn't as easy as grabbing the MVP uniforms from Cemu as they do some optimization on the shaders that shuffles uniforms.</li>
            </ul>
            <details>
                <summary>üö© Missing a few parameters to be fully compatible with the Mii Studio API (read more...)</summary>
                <ul>
                    <li>Note: Camera rotation lighting is inaccurate, and both rotations have slightly different ways of combining.???
                    <ul>
                        <li>Our character rotation is pretty much as accurate in terms of lighting, but camera rotation isn't.</li>
                        <li>Legitimately not sure why that is. Camera rotation rotates the view matrix and character rotation moves the model matrix, so, don't know.</li>
                        <li>If you use multiple rotation axises, with our camera rotation it matches Mii Studio's character rotation, and combining axises with our character rotation matches Mii Studio's camera rotation...??????????? I can't wrap my head around all of this...</li>
                    </ul></li>
                    <li><s>clothesColor</s> (still need pantsColor tho)</li>
                    <li>instanceCount, instanceRotationMode</li>
                    <ul>
                        <li>Many ways to approach doing this efficiently.  glDrawElementsInstanced?</li>
                        <li>Was also considering making a variant (as another instanceRotationMode?) for the same render but multiple expressions.</li>
                        <li>I did attempt this at some point but couldn't wrap my head around getting it right.. I'll probably try it again soon.</li>
                    </ul>
                    <li>splitMode, splitDepthOffset(??)
                    <ul><li>Feel like splitDepthOffset doesn't do anything? It maaaay have done something on cdn-mii 1.0.0 though...??</li></ul></li>
                    <li>lightXDirection, lightYDirection, lightZDirection, lightDirectionMode(??)
                    <ul>
                        <li>I officially don't like the light direction parameters, I legitimately don't think anyone uses it right.</li>
                        <li>Both mii-js AND pf2m.com/tools/mii at some point used to initialize it to zero...</li>
                        <li>... while zero is not the default, so it just gives you a terrible result.</li>
                        <li>There's also lightDirectionMode, which cdn-mii 2.0.0/Mii Studio completely ignore. We don't know what its options do and, while setting it to "none" (the sites above were also doing this so eh where's the blame supposed to go) is SUPPOSED to not make the light directions apply, well, they do.</li>
                        <li class="small">Was light direction even a thing on cdn-mii 1.0.0...??? I feel like pf2m.com/tools/mii specifically said it only worked on 2.0.0.</li>
                        <li>The light direction parameter on cdn-mii/Mii Studio is also clearly not the real light direction uniform being passed to the shader, it would have more intense effects.</li>
                    </ul></li>
                    <li>If you find anything else I should implement from cdn-mii/Mii Studio (other than Miitomo clothing/headgear), <a href="#contact">ping me.</a></li>
                </ul>
            </details></li>
        </ul>

        <details id="planned">
            <summary>
            <h3 style="display: inline;">Planned &amp; Unplanned: <span class="small">click to expand</span></h3>
            </summary>
            <ul class="left-aligned-ul">
            <li>‚ùîAt the moment I don't have the Switch and Miitomo body models, I believe they would once again require skeletal animation to be implemented..</li>

            <li>‚ùîPoses from the Wii U Mii Maker are planned as soon as skeletal animations work.
                <ul>
                    <li>Every pose is just a single-frame animation from MiiAnim.bfres, same source as everything else.</li>
                    <li>Something I'm worried about is, I'm not sure where the camera view is coming from, because the angle is clearly changed.
                        <ul><li>I've seen that it maayy be in the binary...</li>
                        <li>If so, that will SUCK because I've had a reeeeally really hard time navating ffl_app.rpx üò≠üò≠üò≠</li></ul>
                    </li>
                </ul>
            <details>
                <summary>‚ùîNeed to reverse the Tomodachi Life and Miitopia QR code formats. Miitomo codes are planned as soon as Kaerutomo properly implements them.</summary>

                <ul>
                    <li>To be clear, this is not referring to being able to merely scan their codes, but rather make use of the extra game-specific data within.</li>
                    <li> ... For example, applying the custom colors (hair color, etc.) within, displaying their voice or personality traits...
                        <ul><li>In the case of Miitomo, this means extracting the "nx_mii_core_data" Switch data that QR codes are supposed to give you, for the wider colors.</ul></li>
                    <li>I actually did find the AES key and was able to make an encoder/decoder for the extra data within these codes for all of those games, check it out: <a target="_blank" href="https://jsfiddle.net/arian_/ckya346z/8/">https://jsfiddle.net/arian_/ckya346z/8/</a></li>
                    <li>For Tomodachi Life and Miitopia, all of the data is within the code and just needs to be reversed. For Miitomo, it's more complicated, and sadly existing codes won't work, because:</li>
                    <li>It looks like the only thing Miitomo stores in the QR code is some sort of ID ("token_for_json_data") - it expects the server to store the extra data with this ID and will use it to retrieve that data back from the server.</li>
                    <li>Problem is, Kaerutomo does not store or retrieve this data for you. At all. And since it's not open source, nobody can add it except for them, and they aren't interested. üòê</li>
                    <li>(If you are a Kaeru dev reading this, <a href="#contact">PLEEEASEEEE get in touch!!!</a> üò≠)</li>
                </ul>
            </details></li>
            <li>‚ùîNeed to match the texture filtering/mipmap options.
            <ul>
                <li>I feel that the clarity of the face texture doesn't match Wii U or Miitomo, I don't know.</li>
                <li>Some face features are hard to make out at low resolutions like 96x96.</li>
                <li>Will need to take a long hard look at this one day...</li>
            </ul>

            <details>
                <summary>‚ùîReplicating 3DS and Wii renders has been considered but isn't easy or a priority.</summary>
                <ul>
                    <li>This requires extracting the meshes (and textures? but those can be downscaled from the new ones) from CFL_Res.dat, but its header hasn't been reversed.</li>
                    <li>In a pinch RFL_Res.dat could work, but 3DS/Wii U hair styles, textures etc. wouldn't work, and while there's an RFL decomp, I can't find the source code for <a target="_blank" href="https://wiki.tockdom.com/wiki/RFL_Res.dat_Editor">the one RFL_Res.dat editor everyone uses.</a></li>
                    <li>Now, I could try making an extractor for the RFL_Res.dat format using the RFL decomp for structures, and then see how far I can apply that to CFL_Res.dat.</li>
                    <li>... But if it doesn't work, well I'm not familiar with many games that have symbols for CFL (or even how to look at 3DS binaries in Ghidra), and frankly don't care enough to put a lot of time into it. Sorry, 3DS Mii render fans.</li>

                    <li>Second obstacle is shaders, neither of these consoles use GLSL-compatible shaders. This can probably be worked around (or remade since it's very basic) but is still annoying.</li>
                </ul>
            </details></li>

            <li>‚ùîMiitomo/Tomodachi Life clothing/headgear/wigs may be planned.
            <ul>
                <li>Don't expect any of these any time soon, especially clothing and wigs.</li>
                <li>Do keep in mind that these body models are different from the Wii U/Switch models and therefore the clothing may not work on those.</li>
            </ul></li>

            <li>‚ùîI've thought about making a Mii Maker-like app with the FFL decomp, but... don't get your hopes up too far about this.</li>
            <ul>
                <li>However, if you like the sound of this...</li>
                <li>... and you're either working on something like this right now and it just needs Mii heads, OR you'd want to design the UI for this and let me add the rendering logic, <a href="#contact">do get in touch!</a></li>
                <li class="small">(This is assuming, yaknow. it's not a Scratch or Roblox game or something)</li>
            </ul></li>

            </ul>

            <h3 style="display: inline;">Unplanned:</h3>
            <ul class="left-aligned-ul">
            <li>Custom hairstyles or frankly custom anything</li>
            <li>Miitopia makeup, or custom expressions (sorry)
                <ul><li>Miitomo expressions are the only exception, since they're built into AFL (its version of FFL). <a target="_blank" href="/miis/image.png?data=AwBgMIJUICvpzY4vnWYVrXy7ikd01AAAWR1KAGEAcwBtAGkAbgBlAAAAAAAAABw3EhB7ASFuQxwNZMcYAAgegg0AMEGzW4JtAAAAAAAAAAAAAAAAAAAAAAAAAAAAAML0&amp;expression=33">See?</a></li></ul>
            </li>
            <li>BoTW/TOTK models.. "semi-Miis"</li>
            <li>Xbox Miis, Apple Miis, Samsung Miis, any other stupid bootleg Miis
            <ul>
                <li>Never ask me for these ü§¨</li>
            </ul></li>
            </ul>
        </details>

    </section>
